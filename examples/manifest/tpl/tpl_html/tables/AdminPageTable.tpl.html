<!-- AdminPageTable.tpl.html -->
<div id="pagesTableArea"
     hx-get="{{ table.hx.refresh_url|default:'#' }}"
     hx-trigger="pageCreated, pageUpdated, pageDeleted from:body"
     hx-swap="outerHTML"
     hx-target="this">

  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        {% for header in table.headers %}
          <th>{{ header }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in table.rows %}
      <tr>
        <td>{{ row.title }}</td>
        <td>
          {% if row.status %}
            <span class="badge bg-success">Live</span>
          {% else %}
            <span class="badge bg-secondary">Hidden</span>
          {% endif %}
        </td>
        <td>{{ row.updated_at }}</td>
        <td>
          <button class="btn btn-sm btn-outline-primary"
                  hx-get="{% url table.hx.edit_url row.id %}"
                  hx-target="#modal .modal-content"
                  hx-trigger="click"
                  data-bs-toggle="modal"
                  data-bs-target="#modal"
                  aria-label="Edit Page">
            Edit
          </button>

          <button class="btn btn-sm btn-outline-danger ms-2"
                  hx-post="{% url table.hx.delete_url row.id %}"
                  hx-trigger="click"
                  hx-headers='{"HX-Trigger": "pageDeleted"}'
                  hx-confirm="Are you sure you want to delete this page?">
            Delete
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
