{# tpl/widgets/Pager.tpl.html #}
<nav class="d-flex align-items-center justify-content-between mt-3" aria-label="Pagination">
  <div class="d-flex align-items-center gap-2">
    <span class="text-muted small">Page {{ pagination.page }} of {{ pagination.num_pages }} ({{ pagination.count }} items)</span>
    <label class="ms-3 small">Rows per page:</label>
    <select
      class="form-select form-select-sm"
      style="width:auto"
      hx-get="{{ list_endpoint }}?page=1&page_size="
      hx-vals='{"page_size": this.value}'
      hx-target="#{{ table.id or 'tableArea' }}"
      hx-swap="outerHTML"
      hx-push-url="true"
    >
      <option value="10" {% if pagination.page_size == 10 %}selected{% endif %}>10</option>
      <option value="20" {% if pagination.page_size == 20 %}selected{% endif %}>20</option>
    </select>
  </div>

  <ul class="pagination pagination-sm mb-0">
    <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
      <a class="page-link"
         hx-get="{{ list_endpoint }}?page={{ pagination.prev }}&page_size={{ pagination.page_size }}"
         hx-target="#{{ table.id or 'tableArea' }}"
         hx-swap="outerHTML"
         hx-push-url="true"
         aria-label="Previous">&laquo;</a>
    </li>

    {% set last = None %}
    {% for n in pagination.range %}
      {% if last and n > last + 1 %}
        <li class="page-item disabled"><span class="page-link">â€¦</span></li>
      {% endif %}
      <li class="page-item {% if n == pagination.page %}active{% endif %}">
        <a class="page-link"
           hx-get="{{ list_endpoint }}?page={{ n }}&page_size={{ pagination.page_size }}"
           hx-target="#{{ table.id or 'tableArea' }}"
           hx-swap="outerHTML"
           hx-push-url="true">{{ n }}</a>
      </li>
      {% set last = n %}
    {% endfor %}

    <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
      <a class="page-link"
         hx-get="{{ list_endpoint }}?page={{ pagination.next }}&page_size={{ pagination.page_size }}"
         hx-target="#{{ table.id or 'tableArea' }}"
         hx-swap="outerHTML"
         hx-push-url="true"
         aria-label="Next">&raquo;</a>
    </li>
  </ul>
</nav>
