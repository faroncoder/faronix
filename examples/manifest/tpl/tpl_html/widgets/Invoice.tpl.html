{% load static %}
<!-- InvoiceCard.tpl.html -->
<div class="card shadow mb-4">
  <div class="card-header py-3 bg-{{ invoice.theme|default:'primary' }} text-white">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <div class="fw-bold fs-4">Invoice {{ invoice.id }}</div>
        <div class="small">Issued: {{ invoice.date }}</div>
      </div>
      <div class="text-end">
        {% if invoice.brand_logo %}<img src="{{ invoice.brand_logo }}" alt="Logo" height="48" class="mb-2">{% endif %}
        <div class="fw-bold">{{ invoice.brand_name }}</div>
        <div class="text-white-50 small">{{ invoice.brand_tagline }}</div>
      </div>
    </div>
  </div>
  <div class="card-body">
    <div class="row mb-4">
      <div class="col-sm-6">
        <h6 class="mb-2">From:</h6>
        <div class="fw-bold">{{ invoice.from.name }}</div>
        <div class="text-muted small">{% for line in invoice.from.address %}{{ line }}<br>{% endfor %}</div>
      </div>
      <div class="col-sm-6 text-sm-end">
        <h6 class="mb-2">To:</h6>
        <div class="fw-bold">{{ invoice.to.name }}</div>
        <div class="text-muted small">{% for line in invoice.to.address %}{{ line }}<br>{% endfor %}</div>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-bordered">
        <thead class="table-light">
          <tr>
            <th>Description</th>
            <th>Details</th>
            <th>Hours</th>
            <th>Rate</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          {% for item in invoice.items %}
          <tr>
            <td>{{ item.description }}</td>
            <td>{{ item.details }}</td>
            <td>{{ item.hours }}</td>
            <td>{{ item.rate }}</td>
            <td>{{ item.amount }}</td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr><td colspan="4" class="text-end">Subtotal:</td><td>{{ invoice.subtotal }}</td></tr>
          <tr><td colspan="4" class="text-end">Tax ({{ invoice.tax_percent }}):</td><td>{{ invoice.tax_amount }}</td></tr>
          <tr class="fw-bold"><td colspan="4" class="text-end">Total:</td><td>{{ invoice.total }}</td></tr>
        </tfoot>
      </table>
    </div>

    {% if invoice.notes %}
    <div class="alert alert-info mt-4">
      <strong>Note:</strong> {{ invoice.notes }}
    </div>
    {% endif %}
  </div>
</div>